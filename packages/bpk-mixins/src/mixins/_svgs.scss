@import '~bpk-svgs/index';
@import '../bonds';

$_small-svg-size: $bpk-spacing-sm + $bpk-spacing-xs;

@keyframes bpk-keyframe-spin {
  100% {
    transform: rotate(1turn);
  }
}

////
/// @group svgs
////

/// Icon factory.
///
/// @param {variable} $spacing
/// @param {key} $icon
///
/// @access private

@mixin _bpk-icon-factory($map, $spacing, $icon: '') {
  content: '';
  display: inline-block;
  width: $spacing;
  height: $spacing;
  background-size: $spacing $spacing;

  @if $icon != "" {
    background: url(map-get($map, $icon)) no-repeat;
  }

  > svg {
    display: block;
    height: 100%;
  }
}

/// Button alignment utility.
///
/// @access private

@mixin _bpk-svg--align-to-button() {
  vertical-align: text-bottom;
}

/// Large button alignment utility.
///
/// @access private

@mixin _bpk-svg--align-to-large-button() {
  vertical-align: -($bpk-one-pixel-rem * 3);
}

/// Small icon.
///
/// @param {key} $icon [''] - The key of the desired SVG datauri from the $bpk-icons-sm map.
///
/// @example scss
///   .selector {
///     @include bpk-icon-sm(flight-gray-500);
///   }

@mixin bpk-icon-sm($icon: '') {
  @include _bpk-icon-factory($bpk-icons-sm, $_small-svg-size, $icon);

  padding: $bpk-one-pixel-rem;
}

/// Large icon.
///
/// @param {key} $icon [''] - The key of the desired SVG datauri from the $bpk-icons-lg map.
///
/// @example scss
///   .selector {
///     @include bpk-icon-lg(flight-gray-500);
///   }

@mixin bpk-icon-lg($icon: '') {
  @include _bpk-icon-factory($bpk-icons-lg, $bpk-spacing-base, $icon);
}

/// Align to button. Modifies the bpk-icon-sm mixin.
///
/// @require {mixin} bpk-icon-sm
///
/// @example scss
///   .selector {
///     @include bpk-icon-sm(flight-gray-500);
///     @include bpk-icon-sm--align-to-button();
///   }

@mixin bpk-icon-sm--align-to-button() {
  @include _bpk-svg--align-to-button();
}

/// Align to large button. Modifies the bpk-icon-lg mixin.
///
/// @require {mixin} bpk-icon-lg
///
/// @example scss
///   .selector {
///     @include bpk-icon-lg(flight-gray-500);
///     @include bpk-icon-lg--align-to-large-button();
///   }

@mixin bpk-icon-lg--align-to-large-button() {
  @include _bpk-svg--align-to-large-button();
}

/// Logo factory.
///
/// @param {variable} $spacing
/// @param {key} $icon
/// @param {unit} $height
///
/// @access private

@mixin _bpk-logo-factory($map, $logo: '', $height: '') {
  content: '';
  display: inline-block;

  @if $logo != '' {
    background: url(map-get($map, $logo)) no-repeat;
  }

  @if $height != '' {
    height: $height;
  }

  > svg {
    display: block;
    height: 100%;
  }
}

/// Cloud logo.
///
/// @param {key} $logo [''] - The key of the desired SVG datauri from the $bpk-logos-cloud map.
/// @param {unit} $height [$bpk-spacing-xxl] - The desired height.
///
/// @example scss
///   .selector {
///     @include bpk-logo-cloud(cloud-blue-500);
///   }

@mixin bpk-logo-cloud($logo: '', $height: $bpk-spacing-xxl) {
  @include _bpk-logo-factory($bpk-logos-cloud, $logo, $height);
}

/// Inline logo.
///
/// @param {key} $logo [''] - The key of the desired SVG datauri from the $bpk-logos-inline map.
/// @param {unit} $height [$bpk-spacing-xxl] - The desired height.
///
/// @example scss
///   .selector {
///     @include bpk-logo-inline(inline-blue-500);
///   }

@mixin bpk-logo-inline($logo: '', $height: $bpk-spacing-xxl) {
  @include _bpk-logo-factory($bpk-logos-inline, $logo, $height);
}

/// Stacked logo.
///
/// @param {key} $logo [''] - The key of the desired SVG datauri from the $bpk-logos-stacked map.
/// @param {unit} $height [$bpk-spacing-base * 3] - The desired height.
///
/// @example scss
///   .selector {
///     @include bpk-logo-stacked(stacked-blue-500);
///   }

@mixin bpk-logo-stacked($logo: '', $height: $bpk-spacing-base * 3) {
  @include _bpk-logo-factory($bpk-logos-stacked, $logo, $height);
}

/// Tianxun logo.
///
/// @param {key} $logo [''] - The key of the desired SVG datauri from the $bpk-logos-tianxun map.
/// @param {unit} $height [$bpk-spacing-xxl] - The desired height.
///
/// @example scss
///   .selector {
///     @include bpk-logo-tianxun(tianxun-blue-500);
///   }

@mixin bpk-logo-tianxun($logo: '', $height: $bpk-spacing-xxl) {
  @include _bpk-logo-factory($bpk-logos-tianxun, $logo, $height);
}

/// Tianxun stacked logo.
///
/// @param {key} $logo [''] - The key of the desired SVG datauri from the $bpk-logos-tianxun-stacked map.
/// @param {unit} $height [$bpk-spacing-base * 3] - The desired height.
///
/// @example scss
///   .selector {
///     @include bpk-logo-tianxun-stacked(tianxun-stacked-blue-500);
///   }

@mixin bpk-logo-tianxun-stacked($logo: '', $height: $bpk-spacing-base * 3) {
  @include _bpk-logo-factory($bpk-logos-tianxun-stacked, $logo, $height);
}

/// Small spinner.
///
/// @param {key} $spinner - The key of the desired SVG datauri from the $bpk-spinners map.
///
/// @example scss
///   .selector {
///     @include bpk-spinner-sm(spinner-gray-500);
///   }

@mixin bpk-spinner($spinner: '') {
  content: '';
  display: inline-block;
  width: $_small-svg-size;
  height: $_small-svg-size;
  padding: $bpk-one-pixel-rem;
  animation: bpk-keyframe-spin 600ms linear infinite;
  background-size: $_small-svg-size $_small-svg-size;

  @if $spinner != '' {
    background: url(map-get($bpk-spinners, $spinner)) no-repeat;
  }

  > svg {
    display: block;
    height: 100%;
  }
}

/// Large spinner. Modifies the bpk-spinner mixin.
///
/// @require {mixin} bpk-spinner
///
/// @example scss
///   .selector {
///     @include bpk-spinner(spinner-gray-500);
///     @include bpk-spinner-lg();
///   }

@mixin bpk-spinner--lg() {
  width: $bpk-spacing-base;
  height: $bpk-spacing-base;
  padding: 0;
  background-size: $bpk-spacing-base $bpk-spacing-base;
}

/// Extra large spinner. Modifies the bpk-spinner mixin.
///
/// @require {mixin} bpk-spinner
///
/// @example scss
///   .selector {
///     @include bpk-spinner(spinner-gray-500);
///     @include bpk-spinner-xl();
///   }

@mixin bpk-spinner--xl() {
  width: $bpk-spacing-xl;
  height: $bpk-spacing-xl;
  padding: 0;
  background-size: $bpk-spacing-xl $bpk-spacing-xl;
}

/// Align spinner to button. Modifies the bpk-spinner mixin.
///
/// @require {mixin} bpk-spinner
///
/// @example scss
///   .selector {
///     @include bpk-spinner();
///     @include bpk-icon--align-to-button();
///   }

@mixin bpk-spinner--align-to-button() {
  @include _bpk-svg--align-to-button();
}

/// Align spinner to large button. Modifies the bpk-spinner mixin.
///
/// @require {mixin} bpk-spinner
///
/// @example scss
///   .selector {
///     @include bpk-spinner();
///     @include bpk-spinner--align-to-large-button();
///   }

@mixin bpk-spinner--align-to-large-button() {
  @include _bpk-svg--align-to-large-button();
}

