@import '../bonds';

////
/// @group cards
////

/// Basic card.
///
/// @example scss
///   .selector {
///     @include bpk-card();
///   }

@mixin bpk-card {
  position: relative;
  display: block;
  background-color: $bpk-card-background-color;
  color: $bpk-card-color;
  text-decoration: none;
  cursor: pointer;

  @include bpk-box-shadow-sm;
  @include bpk-border-radius-sm;

  @include bpk-hover {
    &::after {
      opacity: 1;
    }
  }

  // Keep transitions and animations to only transform and opacity.
  // This pseudo element solution allows us to animate box-shadow in a performant manner.
  // http://tobiasahlin.com/blog/how-to-animate-box-shadow/
  &::after {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    content: '';
    transition: opacity $bpk-duration-sm ease-in-out;
    opacity: 0;
    pointer-events: none; // To prevent the pseudo element absorbing click events

    @include bpk-box-shadow-lg;
    @include bpk-border-radius-sm;

    // pointer-events doesn't work on ie
    @media screen\0 {
      z-index: -1;
    }
  }

  &:active::after {
    box-shadow: none;
  }
}

/// Adds padding to cards. Modifies the bpk-card mixin.
///
/// @require {mixin} bpk-card
///
/// @example scss
///   .selector {
///     @include bpk-card();
///     @include bpk-card--padded();
///   }

@mixin bpk-card--padded {
  padding: $bpk-card-padding;
}

/// Ticket-style card with a stub.
///
/// @example scss
///   .selector {
///     @include bpk-ticket();
///   }

@mixin bpk-ticket {
  position: relative;
  display: flex;
  align-items: stretch;
  // background-color: $bpk-card-background-color;
  color: $bpk-card-color;
  text-decoration: none;
  cursor: pointer;

  // @include bpk-box-shadow-sm;
  // @include bpk-border-radius-sm;

  // @include bpk-hover {
  //   &::after {
  //     opacity: 1;
  //   }
  // }
}

@mixin bpk-ticket__paper {
  &::after {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    content: '';
    transition: opacity 200ms ease-in-out;
    box-shadow: $bpk-box-shadow-lg;
    opacity: 0;
    pointer-events: none; // To prevent the pseudo element absorbing click events

    // pointer-events doesn't work on ie
    @media screen\0 {
      z-index: -1;
    }
  }
}

@mixin bpk-ticket__main {
  position: relative;
  flex-grow: 1;
  padding: $bpk-card-padding;
  border-radius: $bpk-border-radius-sm 0 0 $bpk-border-radius-sm;
  background-color: $bpk-card-background-color;

  @include bpk-box-shadow-sm;

  @include bpk-rtl {
    border-radius: 0 $bpk-border-radius-sm $bpk-border-radius-sm 0;
  }

  &::after {
    border-radius: inherit;
  }
}

@mixin bpk-ticket__main--vertical {
  border-radius: $bpk-border-radius-sm $bpk-border-radius-sm 0 0;
}

@mixin bpk-ticket__stub {
  position: relative;
  padding: $bpk-card-padding;
  border-radius: 0 $bpk-border-radius-sm $bpk-border-radius-sm 0;
  background-color: $bpk-card-background-color;
  flex-grow: 0;

  @include bpk-box-shadow-sm;

  @include bpk-rtl {
    border-radius: $bpk-border-radius-sm 0 0 $bpk-border-radius-sm;
  }

  &::after {
    border-radius: inherit;
  }
}

@mixin bpk-ticket__stub--vertical {
  border-radius: 0 0 $bpk-border-radius-sm $bpk-border-radius-sm;
}

@mixin bpk-ticket__punchline--vertical {
  flex-shrink: 0;
  position: relative;
  z-index: 1;
  width: $bpk-card-notch-size * 2;
  margin: $bpk-card-notch-size auto;
  background-color: $bpk-card-background-color;
  background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 8' enable-background='new 0 0 4 8'%3E%3Cpath fill='%23DFDCE3' d='M1 1v3c0 .552.448 1 1 1s1-.448 1-1v-3c0-.552-.448-1-1-1s-1 .448-1 1z'/%3E%3C/svg%3E");
  background-repeat: repeat-y;
  background-position: 50% 0;
  background-size: 4px 10px;
}

@mixin bpk-ticket__punchline--horizontal {
  flex-shrink: 0;
  position: relative;
  z-index: 1;
  width: auto;
  height: $bpk-card-notch-size * 2;
  margin: auto $bpk-card-notch-size;
  background-color: $bpk-card-background-color;
  background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 8' enable-background='new 0 0 4 8'%3E%3Cpath fill='%23DFDCE3' d='M1 1v3c0 .552.448 1 1 1s1-.448 1-1v-3c0-.552-.448-1-1-1s-1 .448-1 1z'/%3E%3C/svg%3E");
  background-repeat: repeat-x;
  background-position: 0 50%;
  background-size: 4px 10px;
}

@mixin bpk-ticket__notch {
  position: absolute;
  width: $bpk-card-notch-size * 2;
  height: $bpk-card-notch-size;
  overflow: hidden;
}

@mixin bpk-ticket__notch--left {
  left: -$bpk-card-notch-size;
  width: $bpk-card-notch-size;
  height: $bpk-card-notch-size * 2;
  // background: red;

  &::after {
    // background: blue;
    position: relative;
    right: 200%;
    bottom: 50%;
    content: '';
    display: block;
    width: $bpk-card-notch-size * 4;
    height: $bpk-card-notch-size * 4;
    border: $bpk-card-notch-size solid white;
    border-radius: $bpk-card-notch-size * 2;
    box-shadow: $bpk-box-shadow-sm inset;
  }
}

@mixin bpk-ticket__notch--right {
  right: -$bpk-card-notch-size;
  width: $bpk-card-notch-size;
  height: $bpk-card-notch-size * 2;
  // background: red;

  &::after {
    // background: blue;
    position: relative;
    right: 100%;
    bottom: 50%;
    content: '';
    display: block;
    width: $bpk-card-notch-size * 4;
    height: $bpk-card-notch-size * 4;
    border: $bpk-card-notch-size solid white;
    border-radius: $bpk-card-notch-size * 2;
    box-shadow: $bpk-box-shadow-sm inset;
  }
}

@mixin bpk-ticket__notch--start {
  top: -$bpk-card-notch-size;

  &::after {
    position: relative;
    right: -50%;
    bottom: 200%;
    left: -50%;
    content: '';
    display: block;
    width: $bpk-card-notch-size * 4;
    height: $bpk-card-notch-size * 4;
    border: $bpk-card-notch-size solid white;
    border-radius: $bpk-card-notch-size * 2;
    box-shadow: $bpk-box-shadow-sm inset;
  }
}

@mixin bpk-ticket__notch--end {
  bottom: -$bpk-card-notch-size;

  &::after {
    position: relative;
    right: -50%;
    bottom: 100%;
    left: -50%;
    content: '';
    display: block;
    width: $bpk-card-notch-size * 4;
    height: $bpk-card-notch-size * 4;
    border: $bpk-card-notch-size solid white;
    border-radius: $bpk-card-notch-size * 2;
    box-shadow: $bpk-box-shadow-sm inset;
  }
}
